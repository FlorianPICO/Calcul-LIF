<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Calcul MEMO LIF – SDIS 27</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    margin: 0;
    font-family: system-ui, Arial, sans-serif;
    background: #f5f7fa;
    color: #111;
    line-height: 1.6;
  }

  /* ✅ HEADER RESPONSIVE (logo centré + texte adaptable) */
  header {
    background: #0b1220;
    color: white;
    padding: 42px 16px;
    text-align: center;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 14px;
  }

  header h1 {
    margin: 0;
    font-size: clamp(1.3rem, 4.8vw, 2.2rem);
    line-height: 1.2;
    max-width: 28ch;
  }

  header p {
    opacity: 0.9;
    font-size: clamp(0.95rem, 3.2vw, 1.1rem);
    margin: 0;
    line-height: 1.25;
  }

  section.page {
    max-width: 900px;
    margin: auto;
    padding: 30px 20px;
  }

  .card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #ddd;
  }
.lif-signature {
  margin-top: 18px;
  padding-top: 6px;
  font-size: 12px;
  color: #666;
  text-align: left;
}

  /* ✅ LOGO RESPONSIVE + centrage parfait */
  .logo {
    display: block;
    height: auto;
    width: min(160px, 45vw);
    max-height: 90px;
    object-fit: contain;
    margin: 0;
  }

  .backlink {
    display: inline-block;
    margin-top: 2px;
    padding: 10px 14px;
    border-radius: 10px;
    background: rgba(255,255,255,0.12);
    color: white;
    text-decoration: none;
    font-weight: 700;
  }

  .lif-field input,
  .lif-field select {
    box-sizing: border-box;
  }

  * {
    box-sizing: border-box;
  }

  /* -------- Styles de l'outil LIF -------- */
  .lif-container { max-width:760px; margin:auto; padding:12px }
  .lif-card { background:#fff; border-radius:14px; padding:14px; margin-top:12px; border:1px solid #ddd }

  .lif-card-title {
    font-size: 1.4rem;
    font-weight: 900;
    margin-bottom: 14px;
  }

  .lif-grid { display:grid; grid-template-columns:1fr; gap:10px }
  .lif-field input, .lif-field select { width:100%; padding:10px; border-radius:10px; border:1px solid #ccc }
  .lif-actions { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px }
  .lif-btn { padding:12px; border-radius:12px; font-weight:700; cursor:pointer }
  .lif-btn-primary { background:#2563eb; color:#fff; border:0 }
  .lif-btn-ghost { background:#fff; border:1px solid #ccc }
  .lif-badges { display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px }
  .lif-badge { background:#f5f5f5; padding:12px; border-radius:12px; text-align:center; font-weight:800 }
  .lif-split { display:grid; grid-template-columns:1fr 1fr; gap:12px }
  .lif-panel { border:1px solid #ddd; border-radius:12px; padding:12px }
  .lif-panel-title { font-weight:900; margin-bottom:8px }
  .lif-panel-muted { background:#fafafa }
  .lif-row { display:flex; justify-content:space-between; padding:6px 0; font-weight:700; gap:10px }
  .lif-debord { margin-top:10px; padding:12px; border-radius:12px; text-align:center; font-weight:900; border:1px solid #ddd; background:#fff }
  .lif-help { display:block; margin-top:6px; font-size:12px; color:#5b5b5b }

  @media (max-width: 640px) {
    .lif-split { grid-template-columns: 1fr; }
    section.page { padding: 20px 14px; }
  }

  /* Petit bonus : encore plus propre sur très petits téléphones */
  @media (max-width: 420px) {
    header { padding: 34px 14px; }
    header h1 { max-width: 20ch; }
    .logo { width: min(140px, 42vw); }
  }
</style>

</head>

<body>

<header>
  <!-- ⚠️ Si ton fichier s'appelle Logo.jpg, change juste l'extension -->
  <img src="Logo.png" alt="Logo SDIS 27" class="logo">
 <h1>
  Calcul LIF<br>
  Outil opérationnel<br>
  Feux de liquides&nbsp;inflammables
</h1>


  <p>SDIS 27 – GGOC – Capitaine Florian PICO</p>
  <a class="backlink" href="index.html">← Retour à l’accueil</a>
</header>

<section class="page">
  <div class="card">

    <div class="lif-container">

      <!-- ================== SAISIE ================== -->
      <section class="lif-card">
        <div class="lif-card-title">1) Saisie</div>

        <div class="lif-grid">
          <div class="lif-field">
            <label>Surface en feu (m²) :</label>
            <input id="surfaceFeu" type="number" min="0" step="0.01" placeholder="Ex : 300">
          </div>

          <div class="lif-field">
            <label>Type de feu :</label>
            <select id="typeFeu">
              <option value="nappe">Feu de nappe</option>
              <option value="bac">Feu de bac / cuvette</option>
            </select>
          </div>

          <div class="lif-field">
            <label>Mode d’attaque :</label>
            <select id="attaque">
              <option value="indirect">Indirect</option>
              <option value="direct">Direct</option>
            </select>
          </div>

          <div class="lif-field">
            <label>Produit :</label>
            <select id="produit">
              <option value="non_miscible">Non miscible</option>
              <option value="miscible">Miscible (alcool)</option>
            </select>
            <small class="lif-help">Concentration fixée à 3 %</small>
          </div>

          <!-- POI : visible pour NAPPE + BAC (selon ta logique) -->
          <div class="lif-field" id="blocReflexe">
            <label>Réflexe / Réfléchi :</label>
            <select id="reflexe">
              <option value="reflexe">Réflexe</option>
              <option value="reflechi">Réfléchi (POI)</option>
            </select>
          </div>

          <!-- Tex POI : visible seulement si "Réfléchi (POI)" -->
          <div class="lif-field" id="blocTexPoi" style="display:none;">
            <label>Taux d'extinction défini dans POI (L/min/m²) :</label>
            <input id="texPoi" type="number" min="0" step="0.1" placeholder="Ex : 8">
            <small class="lif-help">Visible uniquement si “Réfléchi (POI)”</small>
          </div>

          <div class="lif-grid" style="grid-template-columns:1fr 1fr;">
  <div class="lif-field">
    <label>Heure de début de temporisation :</label>
    <input id="tempoDebut" type="time">
  </div>

  <div class="lif-field">
    <label>Heure de fin de temporisation :</label>
    <input id="tempoFin" type="time">
  </div>
</div>

          <!-- Cuvette : uniquement en bac -->
          <div class="lif-field" id="blocCuvette" style="display:none;">
            <label>Surface cuvette de rétention (m²) :</label>
            <input id="surfaceCuvette" type="number" min="0" step="0.01" placeholder="Ex : 200">
          </div>
        </div>

        <div class="lif-actions">
          <button id="btnCalculer" class="lif-btn lif-btn-primary" type="button">Calculer</button>
          <button id="btnReset" class="lif-btn lif-btn-ghost" type="button">Réinitialiser</button>
        </div>
      </section>

      <!-- ================== RESULTATS ================== -->
      <section class="lif-card">
        <div class="lif-card-title">2) Résultats</div>

        <div class="lif-badges">
          <div class="lif-badge"><div>Tex</div><div id="oTex">—</div></div>
          <div class="lif-badge"><div>Durée ext.</div><div id="oT">—</div></div>
          <div class="lif-badge"><div>Concentration</div><div>3 %</div></div>
        </div>

        <div class="lif-split">
          <div class="lif-panel">
            <div class="lif-panel-title">EXTINCTION</div>
           <div class="lif-row"><span>Q ext (L/min) :</span><span id="oQext">—</span></div>
            <div class="lif-row"><span>V émulseur (L) :</span><span id="oVemul">—</span></div>
            <div class="lif-row">
  <span>V émulseur pour entretien du tapis de mousse (L) :</span>
  <span id="oEntExt">—</span>
</div>
          </div>

          <div class="lif-panel">
            <div class="lif-panel-title">TEMPORISATION</div>
           <div class="lif-row"><span>Q tempo (L/min) :</span><span id="oQtempo">—</span></div>
            <div class="lif-row"><span>V tempo (L) :</span><span id="oVtempo">—</span></div>
          </div>
        </div>

        <!-- ================== RISQUE DE DEBORDEMENT (BAC UNIQUEMENT) ================== -->
        <div class="lif-panel lif-panel-muted" id="blocDebordement" style="display:none;margin-top:12px;">
          <div class="lif-panel-title">RISQUE DE DÉBORDEMENT</div>

          <div class="lif-grid">
            <div class="lif-field">
              <label>Volume déjà présent dans le bac, avant notre arrivée (L) :</label>
              <input id="vPresent" type="number" min="0">
            </div>
            <div class="lif-field">
              <label>Capacitée totale du bac (L) :</label>
              <input id="vTotal" type="number" min="0">
            </div>
            <div class="lif-field">
              <label>Durée réelle temporisation (min) :</label>
              <input id="tReel" type="number" min="0" step="0.1">
            </div>
          </div>

          <div class="lif-row"><span>Ajout temporisation (L)</span><span id="oAjTempo">—</span></div>
          <div class="lif-row"><span>Ajout extinction (40 min) (L)</span><span id="oAjExt">—</span></div>
          <div class="lif-row"><span>Marge avant débordement (L)</span><span id="oMarge">—</span></div>
          <div class="lif-row"><span>Temps avant débordement</span><span id="oTemps">—</span></div>

          <div class="lif-debord" id="oDebord">—</div>
        </div>

        <!-- ================== TAPIS PREVENTIF (SI DEBORDEMENT) ================== -->
        <div class="lif-panel lif-panel-muted" id="blocTapisPreventif" style="display:none;margin-top:12px;">
          <div class="lif-panel-title">TAPIS PRÉVENTIF</div>
          <div class="lif-row"><span>Volume émulseur (L)</span><span id="oVtapis">—</span></div>
          <div class="lif-row"><span>Débit entretien (L/min)</span><span id="oDentretien">—</span></div>
        </div>

      </section>
<div class="lif-signature">
  © Capitaine Florian PICO – Outil MEMO LIF – Usage professionnel
</div>

    </div>
  </div>
</section>

<script>
(() => {
  const $ = (id) => document.getElementById(id);

  const n = (v) => {
    if (v === null || v === undefined) return NaN;
    const s = String(v).replace(",", ".").trim();
    if (!s) return NaN;
    const x = Number(s);
    return Number.isFinite(x) ? x : NaN;
  };
function getTempoMinutes() {
  const d = $("tempoDebut").value;
  const f = $("tempoFin").value;
  if (!d || !f) return NaN;

  const [hd, md] = d.split(":").map(Number);
  const [hf, mf] = f.split(":").map(Number);

  let debut = hd * 60 + md;
  let fin = hf * 60 + mf;

  // Si passage minuit (ex : 23:50 → 00:20)
  if (fin < debut) fin += 24 * 60;

  return fin - debut;
}

  function setDebordUI(isDebord) {
    $("blocTapisPreventif").style.display = isDebord ? "block" : "none";
  }

  // ✅ LOGIQUE DEMANDÉE :
  // - NAPPE : réflexe/réfléchi disponible
  // - BAC : réflexe/réfléchi disponible
  // - Tex POI visible + saisissable UNIQUEMENT si "réfléchi (POI)"
  function updateUI() {
    const isBac = $("typeFeu").value === "bac";
    const isReflechi = $("reflexe").value === "reflechi";

    // Bac : afficher cuvette + débordement
    $("blocCuvette").style.display = isBac ? "block" : "none";
    $("blocDebordement").style.display = isBac ? "block" : "none";

    // Tex POI : visible/saisissable seulement si réfléchi
    $("blocTexPoi").style.display = isReflechi ? "block" : "none";
    $("texPoi").disabled = !isReflechi;

    // Si on repasse en réflexe : on vide Tex POI
    if (!isReflechi) $("texPoi").value = "";

    // Tapis préventif caché tant que pas de calcul débordement
    setDebordUI(false);

    // Si nappe, vider surface cuvette pour éviter confusion
    if (!isBac) $("surfaceCuvette").value = "";
  }

  function compute() {
    const S = n($("surfaceFeu").value);
    if (!Number.isFinite(S) || S <= 0) return;

    const type = $("typeFeu").value;       // nappe | bac
    const atk = $("attaque").value;        // indirect | direct
    const prod = $("produit").value;       // non_miscible | miscible
    const ref = $("reflexe").value;        // reflexe | reflechi
    const texPoi = n($("texPoi").value);

    let Tex;

    // Si "réfléchi", on impose Tex = Tex POI (dans nappe ou bac)
    if (ref === "reflechi") {
      if (!Number.isFinite(texPoi) || texPoi <= 0) return; // Tex POI obligatoire
      Tex = texPoi;
    } else {
      // Réflexe : barème standard
      Tex = (atk === "indirect")
        ? (prod === "miscible" ? 10 : 5)
        : (prod === "miscible" ? 20 : 10);
    }

    const tExt = (type === "bac") ? 40 : (S < 400 ? 20 : 40);
    const Qext = S * Tex;
    const Qtempo = S * (Tex / 2);

    const entretien = S * 0.2;

    $("oTex").textContent = Tex.toFixed(2);
    $("oT").textContent = String(Math.round(tExt));
    $("oQext").textContent = String(Math.round(Qext));
    $("oVemul").textContent = String(Math.round(Qext * tExt * 0.03));
    $("oQtempo").textContent = String(Math.round(Qtempo));
const tTempoMin = getTempoMinutes();
$("oVtempo").textContent =
  Number.isFinite(tTempoMin)
    ? String(Math.round(Qtempo * tTempoMin * 0.03))
    : "—";

    $("oEntExt").textContent = String(Math.round(entretien));

    // ----------------- Débordement (BAC uniquement) -----------------
    if (type !== "bac") {
      setDebordUI(false);
      return;
    }

    const Vp = n($("vPresent").value);
    const Vt = n($("vTotal").value);
    const tr = n($("tReel").value);

    if (![Vp, Vt, tr].every(Number.isFinite) || Vt <= 0) {
      $("oAjTempo").textContent = "—";
      $("oAjExt").textContent = "—";
      $("oMarge").textContent = "—";
      $("oTemps").textContent = "—";
      $("oDebord").textContent = "—";
      setDebordUI(false);
      return;
    }

    const Vtempo = Qtempo * tr;
    const Vext = Qext * 40;
    const marge = Vt - (Vp + Vtempo + Vext);

    $("oAjTempo").textContent = String(Math.round(Vtempo));
    $("oAjExt").textContent = String(Math.round(Vext));
    $("oMarge").textContent = String(Math.round(marge));

    let deb = false;
    let msg = "Pas de débordement";

    if (Vp >= Vt) {
      deb = true;
      msg = "Débordement immédiat (0 min)";
    } else {
      const margeInitiale = Vt - Vp;

      if (Qtempo * tr >= margeInitiale) {
        const tDeb = margeInitiale / Qtempo;
        deb = true;
        msg = `Débordement pendant temporisation (~${tDeb.toFixed(1)} min)`;
      } else {
        const reste = margeInitiale - Qtempo * tr;
        const tDebExt = reste / Qext;
        if (tDebExt <= 40) {
          deb = true;
          msg = `Débordement pendant extinction (~${(tr + tDebExt).toFixed(1)} min)`;
        }
      }
    }

    $("oTemps").textContent = msg;
    $("oDebord").textContent = deb ? "DÉBORDEMENT" : "PAS DE DÉBORDEMENT";
    $("oDebord").style.background = deb ? "#fee2e2" : "#dcfce7";
    $("oDebord").style.borderColor = deb ? "#ef4444" : "#22c55e";
    $("oDebord").style.color = deb ? "#7f1d1d" : "#065f46";

    setDebordUI(deb);

    if (deb) {
      const Sc = n($("surfaceCuvette").value);
      $("oVtapis").textContent = Number.isFinite(Sc) ? String(Math.round(Sc * 0.15 * 3)) : "—";
      $("oDentretien").textContent = Number.isFinite(Sc) ? String(Math.round(Sc * 0.2)) : "—";
    }
  }

  function resetAll() {
    $("surfaceFeu").value = "";
    $("typeFeu").value = "nappe";
    $("attaque").value = "indirect";
    $("produit").value = "non_miscible";
    $("reflexe").value = "reflexe";
    $("texPoi").value = "";
    $("tempoDebut").value = "";
$("tempoFin").value = "";
    $("surfaceCuvette").value = "";

    $("vPresent").value = "";
    $("vTotal").value = "";
    $("tReel").value = "";

    ["oTex","oT","oQext","oVemul","oQtempo","oVtempo","oEntExt","oAjTempo","oAjExt","oMarge","oTemps","oDebord","oVtapis","oDentretien"]
      .forEach(id => { const e = $(id); if (e) e.textContent = "—"; });

    $("oDebord").style.background = "#fff";
    $("oDebord").style.borderColor = "#ddd";
    $("oDebord").style.color = "#111";

    updateUI();
  }

  // handlers
  $("typeFeu").addEventListener("change", () => { updateUI(); compute(); });
  $("reflexe").addEventListener("change", () => { updateUI(); compute(); });

  document.querySelectorAll("input,select").forEach(e => {
    e.addEventListener("input", compute);
    e.addEventListener("change", compute);
  });

  $("btnCalculer").addEventListener("click", compute);
  $("btnReset").addEventListener("click", resetAll);

  // init
  resetAll();
})();
</script>
<footer>
  © Capitaine Florian PICO – Outil MEMO LIF – Usage professionnel
</footer>
</body>
</html>

















